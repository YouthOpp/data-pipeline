# data/normalized

This folder stores **normalized Opportunity records** parsed from raw feeds.

## Structure

```
data/normalized/
  opportunities/
    YYYY-MM-DD.jsonl   # one JSON Lines file per day; each line is one Opportunity record
```

## Data model

Each line is a JSON object with the following fields:

| Field         | Type            | Required | Description                                      |
|---------------|-----------------|----------|--------------------------------------------------|
| id            | string          | ✅        | Deterministic SHA-1 hash of `source + "|" + url` |
| title         | string          | ✅        |                                                  |
| url           | string          | ✅        |                                                  |
| source        | string          | ✅        | e.g. `"opportunitiesforyouth"`                   |
| source_url    | string          | ✅        | The feed URL                                     |
| published_at  | string (ISO8601)| nullable |                                                  |
| summary       | string          | nullable |                                                  |
| tags          | array of strings| optional |                                                  |
| location      | string          | optional |                                                  |
| deadline      | string (ISO8601)| optional |                                                  |
| language      | string          | optional |                                                  |
| created_at    | string (ISO8601)| ✅        | When the record was first written                |
| updated_at    | string (ISO8601)| ✅        | When the record was last updated/merged          |

## Notes

- Daily files are never deleted — full history is preserved in Git.
- Each file is generated by running:
  ```bash
  node scripts/normalize.js
  ```
- The `data/latest/` folder contains the de-duplicated merged output for the website.

## Querying normalized data

```bash
# Count records in today's file
cat data/normalized/opportunities/$(date +%Y-%m-%d).jsonl | wc -l

# View first 5 records (with pretty JSON)
head -n 5 data/normalized/opportunities/2026-02-26.jsonl | jq .

# Search for specific tags
grep '"Europe"' data/normalized/opportunities/*.jsonl

# Extract all titles
cat data/normalized/opportunities/*.jsonl | jq -r .title
```
